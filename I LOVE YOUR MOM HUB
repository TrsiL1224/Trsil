local Library = loadstring(game:HttpGet("https://raw.githubusercontent.com/xHeptc/Kavo-UI-Library/main/source.lua"))()
local Window = Library.CreateLib("I LOVE YOUR MOM X HUB by TrsiL_", "Midnight")

local MainMenu = Window:NewTab("Main")
local AimbotFOV1 = Window:NewTab("Aimbot")
local SpeedandJump = Window:NewTab("Speed/Jump")
local Setting = Window:NewTab("Setting")

-- Main Menu: ProximityPrompt Functions
local aimbotActive = false
local currentFOV = 100

local MainSection = MainMenu:NewSection("ProximityPrompt Functions")

MainSection:NewButton("NoCooldown", "Remove cooldown for ProximityPrompt", function()
    while task.wait(2) do
        for _, v in ipairs(workspace:GetDescendants()) do
            if v:IsA("ProximityPrompt") then
                v.Enabled = true
                v.HoldDuration = 0
            end
        end
    end
end)

local Noclip = MainMenu:NewSection("Player Noclip")
local noclipActive = false
local runservice = game:GetService("RunService")

Noclip:NewButton("OpenNoclip", "Activate Noclip", function()
    noclipActive = true
    local player = game:GetService("Players").LocalPlayer

    runservice.Stepped:Connect(function()
        if noclipActive then
            for i, v in pairs(player.Character:GetDescendants()) do
                if v:IsA("BasePart") then
                    v.CanCollide = false
                end
            end
        end
    end)
end)

Noclip:NewButton("CloseNoclip", "Deactivate Noclip", function()
    noclipActive = false
    local player = game:GetService("Players").LocalPlayer

    for i, v in pairs(player.Character:GetDescendants()) do
        if v:IsA("BasePart") then
            v.CanCollide = true
        end
    end
end)

-- WalkSpeed and JumpPower Section
local Power = SpeedandJump:NewSection("WalkSpeed and JumpPower")

Power:NewSlider("WalkSpeed", "Adjust WalkSpeed", 100, 10, function(s)
    local player = game.Players.LocalPlayer
    if player and player.Character and player.Character:FindFirstChild("Humanoid") then
        player.Character.Humanoid.WalkSpeed = s
    end
end)

Power:NewSlider("JumpPower", "Adjust JumpPower", 300, 10, function(s)
    local player = game.Players.LocalPlayer
    if player and player.Character and player.Character:FindFirstChild("Humanoid") then
        player.Character.Humanoid.JumpPower = s
    end
end)

-- Aimbot and ESP Section
local Aimbotplayer = AimbotFOV1:NewSection("Aimbot Settings")

local FOVring = Drawing.new("Circle")
FOVring.Visible = true
FOVring.Thickness = 2
FOVring.Color = Color3.fromRGB(128, 0, 128)
FOVring.Filled = false

Aimbotplayer:NewSlider("AimBotFOV", "Adjust AimBot FOV", 300, 100, function(s)
    currentFOV = s
    local Cam = workspace.CurrentCamera

    FOVring.Radius = currentFOV
    FOVring.Position = Cam.ViewportSize / 2

    local function updateDrawings()
        FOVring.Radius = currentFOV
        FOVring.Position = Cam.ViewportSize / 2
    end

    local function lookAt(target)
        local lookVector = (target - Cam.CFrame.Position).unit
        Cam.CFrame = CFrame.new(Cam.CFrame.Position, Cam.CFrame.Position + lookVector)
    end

    local function getClosestPlayerInFOV()
        local nearest, lastDist = nil, math.huge
        local playerMousePos = Cam.ViewportSize / 2

        for _, player in ipairs(game:GetService("Players"):GetPlayers()) do
            if player ~= game.Players.LocalPlayer then
                local part = player.Character and player.Character:FindFirstChild("Head")
                if part then
                    local screenPos, onScreen = Cam:WorldToViewportPoint(part.Position)
                    local distance = (Vector2.new(screenPos.X, screenPos.Y) - playerMousePos).Magnitude
                    if onScreen and distance < lastDist and distance < currentFOV then
                        lastDist = distance
                        nearest = player
                    end
                end
            end
        end
        return nearest
    end

    if aimbotActive then
        RunService.RenderStepped:Connect(function()
            updateDrawings()
            local closest = getClosestPlayerInFOV()
            if closest and closest.Character and closest.Character:FindFirstChild("Head") then
                lookAt(closest.Character.Head.Position)
            end
        end)
    end
end)

Aimbotplayer:NewButton("CloseAimBot", "Remove Aimbot", function()
    aimbotActive = false
    FOVring.Visible = false
end)

Aimbotplayer:NewButton("OpenAimBot", "Activate Aimbot", function()
    aimbotActive = true
    FOVring.Visible = true
end)

-- กำหนดตัวแปรสำหรับ ESP
local Players = game:GetService("Players"):GetChildren()
local RunService = game:GetService("RunService")
local highlight = Instance.new("Highlight")
highlight.Name = "Highlight"
local activeHighlights = {}

local function getCharacter(player)
    return workspace:FindFirstChild(player.Name)
end

local function createHighlight(player)
    repeat wait() until getCharacter(player)
    if not getCharacter(player):FindFirstChild("HumanoidRootPart"):FindFirstChild("Highlight") then
        local highlightClone = highlight:Clone()
        highlightClone.Adornee = getCharacter(player)
        highlightClone.Parent = getCharacter(player):FindFirstChild("HumanoidRootPart")
        highlightClone.DepthMode = Enum.HighlightDepthMode.AlwaysOnTop
        highlightClone.Name = "Highlight"
        activeHighlights[player] = highlightClone
    end
end

local function removeHighlight(player)
    local character = getCharacter(player)
    if character and character:FindFirstChild("HumanoidRootPart") then
        local highlightToRemove = character.HumanoidRootPart:FindFirstChild("Highlight")
        if highlightToRemove then
            highlightToRemove:Destroy()
        end
        activeHighlights[player] = nil
    end
end

local function openESP()
    for i, v in pairs(Players) do
        createHighlight(v)
    end
end

local function closeESP()
    for i, v in pairs(Players) do
        removeHighlight(v)
    end
end

-- ปุ่มสำหรับ ESP
local ESPplayers = AimbotFOV1:NewSection("ESP")

ESPplayers:NewButton("OpenESP", "Activate ESP", function()
    openESP()
end)

ESPplayers:NewButton("CloseESP", "Deactivate ESP", function()
    closeESP()
end)

-- SettingUI Section
local SettingMenu = Setting:NewSection("UI Settings")
SettingMenu:NewKeybind("SetButtonUI", "Toggle UI visibility", Enum.KeyCode.U, function()
    Library:ToggleUI()
end)
